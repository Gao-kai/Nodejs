# Semantic Versioning(Semver) 语义版本化 2.0.0

## Why？

为什么要有项目语义版本化控制？
当我们在开发一个项目或者开发一个 npm 库的时候，总是会写一个版本号来方便项目管理和后续代码的升级迭代、破坏性更新，但是此时就有了两个问题：

1. 一开始的版本号到底是多少？到底是 0.0.0 还是 1.0.0
2. 后续升级的时候，假设我们的版本号是三位数 A.B.C，什么时候给 A+1，什么时候给 B+1，什么时候给 C 加 1
3. 每次加 1 遵循十进制吗 比如 1.9.0 的下一个版本是 1.10.0 还是 2.0.0?

### 2. 举例

主要用于解决在实际的项目开发中，当我们的项目依赖的包越来越多时，如果这些包没有明确的语义化版本控制，那么当我们在升级依赖之后很可能会出现当前项目代码无法兼容升级依赖的问题，举个简单例子，假设我们的项目依赖了一个 package lib@1.0.0，在开发项目的时候我们依赖了这个包的一个 API，假设没有语义化版本控制，lib 库的作者对 API 进行了破坏性更新，当我们升级 lib 为@1.0.1 之后发现代码报错，此时我们就需要 debug 去找到破坏性更新的代码然后修改自己项目的代码以兼容。

但是假设有语义化版本控制，lib 包的作者在对当前库做了破坏性更新之后将自己的版本发布为@2.0.0，这样子我们就知道这个库做了重大更新而会权衡是否要进行更新以防止出现上述问题。

## SemVer

### 0. 官网

[SemVer 中文官网](https://semver.org/lang/zh-CN/)

### 1. 来源

语义化版本控制的规范是由 Gravatars 创办者兼 GitHub 共同创办者 Tom Preston-Werner 所建立。

### 2. 版本号的格式

- 标准的版本号必须是 X.Y.Z 的格式组成，并且 XYZ 必须由非负整数组成，并且不能再数字的前方补 0，比如不能是 01.2.3，或者 1.02.3 这种

- X 代表主版本号 major，Y 代表次版本号 minor，Z 代表补丁号 patch

- XYZ 都必须以数值来进行递增，比如 1.2.9 1.2.10 1.2.11

- 主版本号为 0 的项目表示处于开发阶段，一切都不稳定

- 版本号为 1.0.0 的项目是区分是否形成了公共 API 的依据

### 3. 版本号的递增规范

- 主版本号只在项目加入了破坏性更新或者任何不向下兼容的更新时升级，每次递增时次版本号和补丁号归 0。比如 Vue2.6.14 向 3.0.0 升级

- 次版本号用于项目新增了向下兼容的新功能，或者有某个 API 被废弃时升级，每次递增时补丁号归 0，比如 Vue2.6.14 升级到 2.7.0

- 补丁号主要用于项目修复了一个 bug 时升级。

### 4. 先行版本

除了常见的 X.Y.Z 组成的版本号之外，还有一种先行版本号，比如：
Vue3.0.0-alpha.11
Vue3.0.0-beta.9
Vue3.0.0-rc.1
这些都是什么意思呢？

先说规范：先行版本号可以跟在补丁号之后，需要先加上一个连接符号-在加上一连串以句点分隔的标识符来修饰。比如-xxx.xxx.x.1 这种都算合法的先行版本号。标上先行版本号则表示这个版本并非稳定而且可能无法满足预期的兼容性需求。

- alpha 表示当前软件处于开发和测试阶段，是给内部团队用于测试和开发的，及其不稳定
- beta 表示当前软件进如公测阶段，用户可以先行尝试一些新的功能，但 Api 仍然不稳定
- rc 表示 realease candidate 候选发布版本 有点像正式版本的预览版，后续会修复小的 bug，但 API 已经稳定

## npm 的 version 版本

node 中也遵循 SemVer 规则，在 npm 安装、升级和 package.json 文件中我们会经常看到包的版本号前面还有修饰符^和~，以及关键字 latest

### ^

^表示除了主版本号之外的版本更新,也就是次版本号和补丁号的版本都可以进行修改。

```bash
^1.5.2  >=1.5.2  <2.0.0
```

更新确切的说^应该是只执行不改变左侧非 0 版本号的更新，什么意思呢？

当主版本号为 0 的时候，此时^按照原理应该允许更新范围是>=0.2.3 以及<1.0.0,但由于版本号中出现了 0，所以这个 0 是不能进行修改的，因此只能更新范围>=0.2.3 <0.3.0，也就是只能更新补丁号 次版本号不能变必须是 2

```bash
^0.2.3  >=0.2.3  <0.3.0
```

### ~

~表示如果指定了次版本号，则会只进行修订版本号的更新
如果没有指定，则会进行此版本号的更新

~1.2.3 相当于 >=1.2.3 <1.3.0
~1.2 相当于 >=1.2.0 <1.3.0 (相当于 1.2.x)
~1 相当于 >=1.0.0 <2.0.0

### latest

latest 永远表示安装最新的版本

## 回答问题
